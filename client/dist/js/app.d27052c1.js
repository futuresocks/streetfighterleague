(function(e){function t(t){for(var r,o,s=t[0],i=t[1],l=t[2],f=0,c=[];f<s.length;f++)o=s[f],a[o]&&c.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);p&&p(t);while(c.length)c.shift()();return u.push.apply(u,l||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,s=1;s<n.length;s++){var i=n[s];0!==a[i]&&(r=!1)}r&&(u.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},u=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=i;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.players.length||e.numberPlayers?e._e():n("NumberPlayerInput"),e.numberPlayers&&e.players.length!=e.numberPlayers?n("PlayerForm",{attrs:{players:e.players}}):e._e(),e.numberPlayers&&e.players.length==e.numberPlayers&&!e.fixtures?n("FixtureForm",{attrs:{players:e.players}}):e._e(),e.fixtures?n("FixtureDisplay",{attrs:{fixtures:e.fixtures}}):e._e(),n("LeagueTable",{attrs:{players:e.players}})],1)},u=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:e.handleSubmit}},[n("label",{attrs:{for:"nameInput"}},[e._v("Player "+e._s(e.playerNumber)+", enter your name!")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e.name?n("input",{attrs:{type:"submit",value:"Register Player"}}):e._e()])},s=[],i=n("f499"),l=n.n(i),p=(n("7f7f"),n("ae90")),f=n.n(p),c={data:function(){return{name:""}},methods:{handleSubmit:function(e){e.preventDefault();var t=new f.a(this.name);this.name="",fetch("http://localhost:3000/api/players",{method:"POST",body:l()(t),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return Y.$emit("player-added",e)})}},props:["players"],computed:{playerNumber:function(){return this.players.length+1}}},d=c,m=n("2877"),h=Object(m["a"])(d,o,s,!1,null,"81549a1c",null),y=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:e.handleSubmit}},[n("label",{attrs:{for:"numPlayers"}},[e._v("How many fighters?")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.numPlayers,expression:"numPlayers"}],attrs:{name:"numPlayers",type:"number"},domProps:{value:e.numPlayers},on:{input:function(t){t.target.composing||(e.numPlayers=t.target.value)}}}),n("input",{attrs:{type:"submit",value:"Confirm"}})])},b=[],g={data:function(){return{numPlayers:0}},methods:{handleSubmit:function(e){e.preventDefault(),Y.$emit("playerNumber-input",this.numPlayers)}}},x=g,P=Object(m["a"])(x,v,b,!1,null,"437ff230",null),_=P.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:e.handleSubmit}},[n("label",{attrs:{for:"rounds"}},[e._v("How many rounds you after?")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rounds,expression:"rounds"}],attrs:{name:"rounds",type:"number"},domProps:{value:e.rounds},on:{input:function(t){t.target.composing||(e.rounds=t.target.value)}}}),n("label",{attrs:{for:"startDate"}},[e._v("Starting from:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.startDate,expression:"startDate"}],attrs:{name:"startDate",type:"date"},domProps:{value:e.startDate},on:{input:function(t){t.target.composing||(e.startDate=t.target.value)}}}),n("label",{attrs:{for:"endDate"}},[e._v("To:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.endDate,expression:"endDate"}],attrs:{name:"endDate",type:"date"},domProps:{value:e.endDate},on:{input:function(t){t.target.composing||(e.endDate=t.target.value)}}}),e.startDate&&e.endDate&&e.rounds?n("input",{attrs:{type:"submit",value:"Generate Tournament"}}):e._e()])},D=[],O=n("795b"),j=n.n(O),E=(n("ac6a"),n("5df3"),n("5a0c"),n("ecd9")),S=n("2ef0"),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.players=e,this.rounds=t};T.prototype.generateRoundRobins=function(){for(var e=this,t=[],n=0;n<this.rounds;n++)this.players.forEach(function(n,r){for(var a=r+1;a<e.players.length;a++)t.push([n,e.players[a]])});return t},T.prototype.dateMaker=function(e,t){var n=[],r=e;while(r.isBefore(t))n.push(r),r=5===r.day()?r.add(3,"days"):r.add(1,"days");return n.push(t),n},T.prototype.generateFixtures=function(e,t){var n=this.generateRoundRobins(),r=this.dateMaker(e,t),a=n.length/r.length,u=S.chunk(n,a),o=[];r.forEach(function(e,t){var n=u[t],r=n.map(function(t){return new E(t[0],t[1],e)});o.push(r)});var s=S.flatten(o);return s};var $=n("5a0c"),N=n.n($),F={data:function(){return{startDate:null,endDate:null,rounds:0,fixtures:[]}},props:["players"],methods:{handleSubmit:function(e){e.preventDefault();var t=new T(this.players,this.rounds),n=N()(this.startDate),r=N()(this.endDate);this.fixtures=t.generateFixtures(n,r);var a=this.fixtures.map(function(e){return fetch("http://localhost:3000/api/fixtures",{method:"POST",body:l()(e),headers:{"Content-Type":"application/json"}})});j.a.all(a).then(function(e){return e.map(function(e){return e.json()})}).then(function(e){return e.forEach(function(e){e.then(function(e){return Y.$emit("fixture-created",e)})})})}}},k=F,M=Object(m["a"])(k,w,D,!1,null,"d3ded1d0",null),R=M.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},B=[],C={},G=C,H=Object(m["a"])(G,L,B,!1,null,"ad9476aa",null),I=H.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[e._v("LEAGUE TABLE GOES HERE")])},J=[],W={},U=W,q=Object(m["a"])(U,A,J,!1,null,"601f821d",null),z=q.exports,K={data:function(){return{fixtures:[],players:[],numberPlayers:0}},mounted:function(){var e=this;fetch("http://localhost:3000/api/players").then(function(e){return e.json()}).then(function(t){return e.players=t}),Y.$on("playerNumber-input",function(t){return e.numberPlayers=t}),Y.$on("player-added",function(t){return e.players.push(t)}),Y.$on("fixture-created",function(t){return e.fixtures.push(t)})},components:{PlayerForm:y,NumberPlayerInput:_,FixtureForm:R,FixtureDisplay:I,LeagueTable:z}},Q=K,V=Object(m["a"])(Q,a,u,!1,null,"48d55009",null),X=V.exports;n.d(t,"eventBus",function(){return Y}),r["a"].config.productionTip=!1;var Y=new r["a"];new r["a"]({render:function(e){return e(X)}}).$mount("#app")},ae90:function(e,t){var n=function(e){this.name=e,this.matchesWon=0,this.matchesLost=0,this.roundsWon=0};e.exports=n},ecd9:function(e,t){var n=function(e,t,n){this.playerOne=e,this.playerTwo=t,this.fighterOne=null,this.fighterTwo=null,this.date=n};e.exports=n}});
//# sourceMappingURL=app.d27052c1.js.map